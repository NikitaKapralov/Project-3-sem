# Техническое задание на проект: «Система анализа расходов с прогнозированием бюджета на основе исторических данных»

## 1. Цель проекта
Разработка веб-сервиса для персонального финансового учета, который не только фиксирует доходы и расходы, но и анализирует финансовые привычки пользователя. Ключевая цель — на основе исторических данных предоставлять простой прогноз бюджета на следующий период, помогая в планировании и оптимизации трат.

## 2. Роли пользователей
*   **Гость:** Может просматривать демонстрационные скриншоты, описание функционала и примеры аналитических графиков на главной странице.
*   **Авторизованный пользователь:** Полный доступ к персональному финансовому дневнику: внесение операций, управление категориями, просмотр детальной аналитики и персонализированного прогноза.
*   **Администратор:** Полный доступ к админ-панели Django для управления пользователями и их данными.

## 3. Модели данных 

*   **Категория (`Category`)**:
    *   `user` — владелец категории.
    *   `name` — название (например, "Супермаркет", "Кафе").
    *   `type` — тип операции.
    *   `color` — hex-код цвета для графиков.
    *   **Связь:** `Category` → `Transaction` (один-ко-многим).

*   **Транзакция (`Transaction`)** (основная историческая запись):
    *   `user` — владелец.
    *   `amount` — сумма.
    *   `category` — категория.
    *   `date` — дата операции (исторические данные).
    *   `description` — комментарий.
    *   **Связь:** Центральная модель, связана с `User` и `Category`.

*   **Прогноз бюджета (`BudgetForecast`)** (модель для хранения результатов прогноза):
    *   `user` — владелец прогноза.
    *   `period` — период прогноза (например, "Январь 2026").
    *   `predicted_amount` — спрогнозированная сумма общих расходов.
    *   `calculation_method` — метод расчета.
    *   `created_at` — дата и время создания прогноза.
    *   **Связь:** Связана с `User`. Использует исторические данные из `Transaction`.

## 4. Ключевой функционал (User Stories)

*   **Ведение учета:** Пользователь через интуитивную форму вносит новую транзакцию, указывая сумму, дату, категорию и описание. Все записи отображаются в таблице с возможностью фильтрации по периоду и категории.
*   **Анализ исторических данных:** На странице "Аналитика" система рассчитывает и визуализирует:
    *   Динамику расходов по месяцам (линейный график).
    *   Распределение трат по категориям за выбранный период (круговая диаграмма).
    *   Сравнение текущих трат с прошлым периодом в процентах.
*   **Генерация прогноза бюджета:** По запросу пользователя система анализирует его расходы за выбранный период (3 или 6 месяцев), вычисляет прогноз на следующий месяц и сохраняет результат. Прогноз отображается на отдельной странице с пояснением метода расчета.
*   **Управление категориями:** Пользователь создает, редактирует и удаляет персонализированные категории для точного учета, назначая им цвета для визуального различия на графиках.

## 5. Внешние интеграции / Аналитика

*   **Аналитика и прогнозирование:** Использование **Django ORM Aggregation** (`Sum`, `Avg`, аннотации) и библиотеки **Pandas** для обработки временных рядов исторических транзакций. **Прогноз** реализуется через вычисление **скользящего среднего** с возможностью выбора периода (3 или 6 месяцев).
*   **Визуализация:** Использование библиотеки **Chart.js** для отрисовки интерактивных графиков аналитики. Данные для графиков подготавливаются в `views.py` с помощью Django ORM и передаются в шаблон в формате JSON.
